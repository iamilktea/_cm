# 習題 8 (第10題): 機率統計 - 檢定背後的數學原理

本作業透過 Python 程式碼手動實作統計檢定公式，並透過 AI 問答整理出 Z 檢定與 T 檢定背後的數學推導過程。

## ⚠️ 來源宣告
> 本報告之數學原理解析由本人向 AI (ChatGPT/Gemini) 提問後，經由本人消化、整理並撰寫程式碼驗證公式。

---

## 1. Z-test (Z 檢定) 的數學原理

### 核心概念
Z 檢定用於 **母體變異數 ($\sigma^2$) 已知** 且樣本數夠大 (通常 $n \ge 30$) 的情況。它的理論基礎是 **中央極限定理 (Central Limit Theorem, CLT)**。

### 公式推導
1.  **抽樣分佈**：
    根據 CLT，當樣本數 $n$ 足夠大時，樣本平均數 $\bar{X}$ 會服從常態分佈：
    $$\bar{X} \sim N(\mu, \frac{\sigma^2}{n})$$
    其中 $\mu$ 是母體平均，$\sigma$ 是母體標準差。

2.  **標準化 (Standardization)**：
    將 $\bar{X}$ 轉換為標準常態分佈 $Z \sim N(0, 1)$，我們將變數減去平均值，再除以標準差（此處為標準誤 SE）：
    $$Z = \frac{\bar{X} - \mu}{SE} = \frac{\bar{X} - \mu}{\frac{\sigma}{\sqrt{n}}}$$

這就是程式碼中 `z_test_one_sample` 函式所使用的公式。

---

## 2. T-test (T 檢定) 的數學原理

### 核心概念
當 **母體變異數 ($\sigma^2$) 未知** 時（現實中最常見），我們必須用 **樣本標準差 ($s$)** 來估計母體標準差。此時，統計量不再服從常態分佈，而是服從 **學生氏 t 分佈 (Student's t-distribution)**。

t 分佈比常態分佈有「更厚的尾巴 (heavier tails)」，反映了用樣本估計母體標準差時所帶來的不確定性。

### 2-1. 單樣本 T 檢定 (One-sample t-test)
* **推導**：將 Z 公式中的 $\sigma$ 替換為 $s$（樣本標準差）：
    $$t = \frac{\bar{X} - \mu}{\frac{s}{\sqrt{n}}}$$
* **自由度 (df)**：$n - 1$。
* **程式實作**：使用無偏估計計算 $s$ (分母為 $n-1$)。

### 2-2. 雙樣本獨立 T 檢定 (Independent Two-sample t-test)
* **情境**：比較兩組獨立樣本 ($\bar{X}_1, \bar{X}_2$) 的平均值是否相同。
* **假設**：兩組母體變異數相等 (Homogeneity of variance)。
* **公式推導**：
    我們需要計算兩組數據的 **合併變異數 (Pooled Variance, $s_p^2$)**，這是兩個樣本變異數的加權平均：
    $$s_p^2 = \frac{(n_1 - 1)s_1^2 + (n_2 - 1)s_2^2}{n_1 + n_2 - 2}$$
    
    接著計算 T 統計量：
    $$t = \frac{\bar{X}_1 - \bar{X}_2}{s_p \sqrt{\frac{1}{n_1} + \frac{1}{n_2}}}$$
* **自由度**：$n_1 + n_2 - 2$。

### 2-3. 雙樣本配對 T 檢定 (Paired Sample t-test)
* **情境**：同一組對象在前後兩個時間點的測量 (Before vs After)。
* **數學轉化**：
    配對檢定其實是 **「差值 ($D$) 的單樣本 T 檢定」**。
    令 $D_i = X_{after, i} - X_{before, i}$。
    我們的虛無假設變成：差值的平均數 $\mu_D = 0$。
* **公式**：
    $$t = \frac{\bar{D} - 0}{\frac{s_D}{\sqrt{n}}}$$
    其中 $\bar{D}$ 是差值的平均，$s_D$ 是差值的標準差。

## 3. 程式驗證結果

執行 `statistics_test.py` 後，我們可以直接看到公式計算出的統計量：

```text
=== 1. Z-test (單樣本) ===
Z-score: 0.5060 (公式計算)
P-value: 0.6129

=== 2-1. T-test (單樣本) ===
T-score: 1.3484 (公式計算)
P-value: 0.2104

=== 2-2. T-test (雙樣本獨立) ===
T-score: 4.6729 (公式計算)
P-value: 0.0016

=== 2-3. T-test (雙樣本配對) ===
T-score: -2.3534 (公式計算)
P-value: 0.0783
